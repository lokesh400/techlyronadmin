<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Send Proposal</title>
</head>
<body class="bg-gray-100 p-6 sm:p-10">
  <div class="max-w-2xl mx-auto bg-white p-8 shadow">
    <h1 class="text-2xl font-bold mb-2">Send Proposal</h1>
    <% const alreadySent = proposal && proposal.sent; %>
    <p class="text-gray-600 mb-6">
      <%= alreadySent ? 'This proposal has already been sent.' : 'Confirm and send the proposal email to the client.' %>
    </p>

    <div class="mb-6">
      <p><strong>Client Name:</strong> <%= lead.name %></p>
      <p><strong>Business Name:</strong> <%= lead.businessName || '-' %></p>
      <p><strong>Email:</strong> <%= lead.email || '-' %></p>
      <p><strong>Contact:</strong> <%= lead.contact || '-' %></p>
    <p><strong>Services:</strong> <%= lead.services && lead.services.length > 0 ? lead.services.join(', ') : '-' %></p>

    </div>

    <form action="/admin/proposals/send/mail/<%= lead._id %>" method="POST" class="flex flex-col gap-2 sm:flex-row">
      <% if (!alreadySent) { %>
        <button type="submit" class="inline-flex items-center justify-center rounded bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700">Send Proposal</button>
      <% } %>
      <a href="/admin/proposals/create/<%= lead._id %>" class="inline-flex items-center justify-center rounded bg-gray-200 px-4 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-300">Back to Preview</a>
      <a href="/admin/proposals" class="inline-flex items-center justify-center rounded bg-gray-100 px-4 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-200">Back to Proposals</a>
    </form>
  </div>
</body>
</html>
